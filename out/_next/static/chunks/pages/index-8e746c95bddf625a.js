(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6616)}])},6616:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return i}});var t=s(5893),l=s(7294);function i(){let[e,a]=(0,l.useState)([]),[s,i]=(0,l.useState)(!1),[r,n]=(0,l.useState)(null),[o,c]=(0,l.useState)(0),d=async()=>{try{i(!0),n(null);let e=await fetch("/api/images"),s=await e.json();if(!s.success)throw Error(s.error||"Failed to fetch images");a(s.images)}catch(e){n(e.message)}finally{i(!1)}},u=async e=>{try{let a=e.target.files[0];if(!a)return;i(!0),n(null),c(0);let s=new FormData;s.append("file",a);let t=await fetch("/api/upload",{method:"POST",body:s}),l=await t.json();if(!l.success)throw Error(l.error||"Upload failed");await d()}catch(e){n(e.message)}finally{i(!1),c(0)}},f=async e=>{try{let a=await fetch("/api/images/".concat(e),{method:"DELETE"}),s=await a.json();if(!s.success)throw Error(s.error||"Failed to delete image");await d()}catch(e){n(e.message)}};return(0,l.useEffect)(()=>{d()},[]),(0,t.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Image Manager"}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"sr-only",children:"Choose files"}),(0,t.jsx)("input",{type:"file",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:u,accept:"image/*",disabled:s})]}),o>0&&o<100&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(o,"%")}})})})]}),s?(0,t.jsx)("div",{className:"text-center text-gray-500",children:"Loading..."}):(0,t.jsx)("div",{className:"grid grid-cols-3 gap-4",children:e.map(e=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("img",{src:e.url,alt:e.filename,className:"w-full aspect-square object-cover rounded-lg"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 rounded-lg",children:(0,t.jsx)("button",{onClick:()=>f(e.id),className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})})]},e.id))}),r&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsx)("div",{className:"font-semibold text-red-600",children:"Error:"}),(0,t.jsx)("div",{className:"text-red-700",children:r})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);