(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6616)}])},6616:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return i}});var a=s(5893),t=s(7294);function i(){let[e,r]=(0,t.useState)(!1),[s,i]=(0,t.useState)(null),[l,n]=(0,t.useState)(null),[d,o]=(0,t.useState)(null),[c,m]=(0,t.useState)(null),[g,h]=(0,t.useState)([]),[x,u]=(0,t.useState)(!1),b=async()=>{try{u(!0),n(null);let e=await fetch("https://gif-converter.lijinhai255.workers.dev/api/images",{method:"GET",headers:{Accept:"application/json"}}),r=await e.json();if(!e.ok)throw Error(r.error||"Server error: ".concat(e.status));if(r.success&&r.images)h(r.images);else throw Error("Invalid response format")}catch(e){console.error("Error fetching images:",e),n(e.message)}finally{u(!1)}};(0,t.useEffect)(()=>{b()},[]);let f=async()=>{try{r(!0),n(null),o(null),m(null),i(null);let e=await fetch("https://gif-converter.lijinhai255.workers.dev/api/gif-converter",{method:"POST",headers:{Accept:"application/json"}}),s=await e.json();if(!e.ok)throw o(s.debug||{}),Error(s.details||"Server error: ".concat(e.status));if(s.success&&s.image){if(!s.image.startsWith("data:image/gif;base64,"))throw Error("Invalid image data format");m({format:"GIF",size:Math.round(.75*s.image.length),dimensions:"1x1 px (scaled to 100x100)"}),i(s.image),o(s.debug||{}),await new Promise((e,r)=>{let a=new Image;a.onload=e,a.onerror=r,a.src=s.image})}else throw Error("Invalid response format")}catch(e){console.error("Error:",e),n(e.message)}finally{r(!1)}};return(0,a.jsxs)("div",{className:"p-8 max-w-3xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Image Converter Test"}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Original Images:"}),x?(0,a.jsx)("div",{className:"text-gray-600",children:"Loading images..."}):(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4",children:g.map((e,r)=>(0,a.jsxs)("div",{className:"p-4 bg-white border-2 border-gray-200 rounded-lg",children:[(0,a.jsx)("div",{className:"bg-gray-100 p-2 rounded-md",children:(0,a.jsx)("img",{src:e.url,alt:"Original ".concat(r+1),className:"w-full h-32 object-contain border border-gray-300"})}),(0,a.jsx)("div",{className:"mt-2 text-sm text-center text-gray-600",children:e.name})]},e.name))})]}),(0,a.jsx)("button",{onClick:f,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg mb-6  disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:e?"Processing...":"Convert to GIF"}),l&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("div",{className:"font-semibold text-red-600",children:"Error:"}),(0,a.jsx)("div",{className:"text-red-700",children:l})]}),d&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,a.jsx)("div",{className:"font-semibold mb-2",children:"Debug Info:"}),(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:JSON.stringify(d,null,2)})]}),s&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"Converted GIF:"}),c&&(0,a.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:["Format: ",c.format]}),(0,a.jsxs)("div",{children:["Size: ",c.size," bytes"]}),(0,a.jsxs)("div",{children:["Dimensions: ",c.dimensions]})]}),(0,a.jsx)("div",{className:"p-4 bg-white border-2 border-gray-200 rounded-lg inline-block",children:(0,a.jsx)("div",{className:"bg-gray-100 p-2 rounded-md",children:(0,a.jsx)("img",{src:s,alt:"Processed",className:"border border-gray-300",style:{imageRendering:"pixelated",width:"100px",height:"100px",backgroundColor:"white",boxShadow:"0 0 10px rgba(0,0,0,0.1)"}})})}),(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,a.jsx)("div",{className:"font-semibold mb-2",children:"Image Data URL:"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 break-all font-mono",children:[s.substring(0,100),"..."]})]})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);